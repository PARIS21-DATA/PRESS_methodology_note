<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>3 Identifying data and statistical projects using machine learning | Methodology for measuring and estimating funding to data and statistics</title>
  <meta name="description" content="Technical note for the Partner Report on Support to Statistics" />
  <meta name="generator" content="bookdown 0.28 and GitBook 2.6.7" />

  <meta property="og:title" content="3 Identifying data and statistical projects using machine learning | Methodology for measuring and estimating funding to data and statistics" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Technical note for the Partner Report on Support to Statistics" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="3 Identifying data and statistical projects using machine learning | Methodology for measuring and estimating funding to data and statistics" />
  
  <meta name="twitter:description" content="Technical note for the Partner Report on Support to Statistics" />
  

<meta name="author" content="Yu Tian" />
<meta name="author" content="Archita Misra" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="monitoring-funding-to-statistics-with-accuracy.html"/>
<link rel="next" href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>

<script>
    /* ========================================================================
     * Bootstrap: transition.js v3.3.7
     * http://getbootstrap.com/javascript/#transitions
     * ========================================================================
     * Copyright 2011-2016 Twitter, Inc.
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * ======================================================================== */
    
    
    +function ($) {
      'use strict';
    
      // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
      // ============================================================
    
      function transitionEnd() {
        var el = document.createElement('bootstrap')
    
        var transEndEventNames = {
          WebkitTransition : 'webkitTransitionEnd',
          MozTransition    : 'transitionend',
          OTransition      : 'oTransitionEnd otransitionend',
          transition       : 'transitionend'
        }
    
        for (var name in transEndEventNames) {
          if (el.style[name] !== undefined) {
            return { end: transEndEventNames[name] }
          }
        }
    
        return false // explicit for ie8 (  ._.)
      }
    
      // http://blog.alexmaccaw.com/css-transitions
      $.fn.emulateTransitionEnd = function (duration) {
        var called = false
        var $el = this
        $(this).one('bsTransitionEnd', function () { called = true })
        var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
        setTimeout(callback, duration)
        return this
      }
    
      $(function () {
        $.support.transition = transitionEnd()
    
        if (!$.support.transition) return
    
        $.event.special.bsTransitionEnd = {
          bindType: $.support.transition.end,
          delegateType: $.support.transition.end,
          handle: function (e) {
            if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
          }
        }
      })
    
    }(jQuery);
    </script>
    <script>
    /* ========================================================================
     * Bootstrap: collapse.js v3.3.7
     * http://getbootstrap.com/javascript/#collapse
     * ========================================================================
     * Copyright 2011-2016 Twitter, Inc.
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * ======================================================================== */
    
    /* jshint latedef: false */
    
    +function ($) {
      'use strict';
    
      // COLLAPSE PUBLIC CLASS DEFINITION
      // ================================
    
      var Collapse = function (element, options) {
        this.$element      = $(element)
        this.options       = $.extend({}, Collapse.DEFAULTS, options)
        this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                               '[data-toggle="collapse"][data-target="#' + element.id + '"]')
        this.transitioning = null
    
        if (this.options.parent) {
          this.$parent = this.getParent()
        } else {
          this.addAriaAndCollapsedClass(this.$element, this.$trigger)
        }
    
        if (this.options.toggle) this.toggle()
      }
    
      Collapse.VERSION  = '3.3.7'
    
      Collapse.TRANSITION_DURATION = 350
    
      Collapse.DEFAULTS = {
        toggle: true
      }
    
      Collapse.prototype.dimension = function () {
        var hasWidth = this.$element.hasClass('width')
        return hasWidth ? 'width' : 'height'
      }
    
      Collapse.prototype.show = function () {
        if (this.transitioning || this.$element.hasClass('in')) return
    
        var activesData
        var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')
    
        if (actives && actives.length) {
          activesData = actives.data('bs.collapse')
          if (activesData && activesData.transitioning) return
        }
    
        var startEvent = $.Event('show.bs.collapse')
        this.$element.trigger(startEvent)
        if (startEvent.isDefaultPrevented()) return
    
        if (actives && actives.length) {
          Plugin.call(actives, 'hide')
          activesData || actives.data('bs.collapse', null)
        }
    
        var dimension = this.dimension()
    
        this.$element
          .removeClass('collapse')
          .addClass('collapsing')[dimension](0)
          .attr('aria-expanded', true)
    
        this.$trigger
          .removeClass('collapsed')
          .attr('aria-expanded', true)
    
        this.transitioning = 1
    
        var complete = function () {
          this.$element
            .removeClass('collapsing')
            .addClass('collapse in')[dimension]('')
          this.transitioning = 0
          this.$element
            .trigger('shown.bs.collapse')
        }
    
        if (!$.support.transition) return complete.call(this)
    
        var scrollSize = $.camelCase(['scroll', dimension].join('-'))
    
        this.$element
          .one('bsTransitionEnd', $.proxy(complete, this))
          .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
      }
    
      Collapse.prototype.hide = function () {
        if (this.transitioning || !this.$element.hasClass('in')) return
    
        var startEvent = $.Event('hide.bs.collapse')
        this.$element.trigger(startEvent)
        if (startEvent.isDefaultPrevented()) return
    
        var dimension = this.dimension()
    
        this.$element[dimension](this.$element[dimension]())[0].offsetHeight
    
        this.$element
          .addClass('collapsing')
          .removeClass('collapse in')
          .attr('aria-expanded', false)
    
        this.$trigger
          .addClass('collapsed')
          .attr('aria-expanded', false)
    
        this.transitioning = 1
    
        var complete = function () {
          this.transitioning = 0
          this.$element
            .removeClass('collapsing')
            .addClass('collapse')
            .trigger('hidden.bs.collapse')
        }
    
        if (!$.support.transition) return complete.call(this)
    
        this.$element
          [dimension](0)
          .one('bsTransitionEnd', $.proxy(complete, this))
          .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
      }
    
      Collapse.prototype.toggle = function () {
        this[this.$element.hasClass('in') ? 'hide' : 'show']()
      }
    
      Collapse.prototype.getParent = function () {
        return $(this.options.parent)
          .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
          .each($.proxy(function (i, element) {
            var $element = $(element)
            this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
          }, this))
          .end()
      }
    
      Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
        var isOpen = $element.hasClass('in')
    
        $element.attr('aria-expanded', isOpen)
        $trigger
          .toggleClass('collapsed', !isOpen)
          .attr('aria-expanded', isOpen)
      }
    
      function getTargetFromTrigger($trigger) {
        var href
        var target = $trigger.attr('data-target')
          || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7
    
        return $(target)
      }
    
    
      // COLLAPSE PLUGIN DEFINITION
      // ==========================
    
      function Plugin(option) {
        return this.each(function () {
          var $this   = $(this)
          var data    = $this.data('bs.collapse')
          var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)
    
          if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
          if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
          if (typeof option == 'string') data[option]()
        })
      }
    
      var old = $.fn.collapse
    
      $.fn.collapse             = Plugin
      $.fn.collapse.Constructor = Collapse
    
    
      // COLLAPSE NO CONFLICT
      // ====================
    
      $.fn.collapse.noConflict = function () {
        $.fn.collapse = old
        return this
      }
    
    
      // COLLAPSE DATA-API
      // =================
    
      $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
        var $this   = $(this)
    
        if (!$this.attr('data-target')) e.preventDefault()
    
        var $target = getTargetFromTrigger($this)
        var data    = $target.data('bs.collapse')
        var option  = data ? 'toggle' : $this.data()
    
        Plugin.call($target, option)
      })
    
    }(jQuery);
    </script>
    <script>
    window.initializeCodeFolding = function(show) {
    
      // handlers for show-all and hide all
      $("#rmd-show-all-code").click(function() {
        // close the dropdown menu when an option is clicked
        $("#allCodeButton").dropdown("toggle");
        $('div.r-code-collapse').each(function() {
          $(this).collapse('show');
        });
      });
      $("#rmd-hide-all-code").click(function() {
        // close the dropdown menu when an option is clicked
        $("#allCodeButton").dropdown("toggle");
        $('div.r-code-collapse').each(function() {
          $(this).collapse('hide');
        });
      });
    
      // index for unique code element ids
      var currentIndex = 1;
    
      // select all R code blocks
      var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan');
      rCodeBlocks.each(function() {
    
        // if code block has been labeled with class `fold-show`, show the code on init!
        var classList = $(this).attr('class').split(/\s+/);
        for (var i = 0; i < classList.length; i++) {
        if (classList[i] === 'fold-show') {
            show = true;
          }
        }
    
        // create a collapsable div to wrap the code in
        var div = $('<div class="collapse r-code-collapse"></div>');
        if (show)
          div.addClass('in');
        var id = 'rcode-643E0F36' + currentIndex++;
        div.attr('id', id);
        $(this).before(div);
        $(this).detach().appendTo(div);
    
        // add a show code button right above
        var showCodeText = $('<span>' + (show ? 'Hide' : 'Code') + '</span>');
        var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
        showCodeButton.append(showCodeText);
        showCodeButton
            .attr('data-toggle', 'collapse')
            .attr('data-target', '#' + id)
            .attr('aria-expanded', show)
            .attr('aria-controls', id);
    
        var buttonRow = $('<div class="row"></div>');
        var buttonCol = $('<div class="col-md-12"></div>');
    
        buttonCol.append(showCodeButton);
        buttonRow.append(buttonCol);
    
        div.before(buttonRow);
    
        // hack: return show to false, otherwise all next codeBlocks will be shown!
        show = false;
    
        // update state of button on show/hide
        div.on('hidden.bs.collapse', function () {
          showCodeText.text('Code');
        });
        div.on('show.bs.collapse', function () {
          showCodeText.text('Hide');
        });
      });
    
    }
    </script>
    <script>
    /* ========================================================================
     * Bootstrap: dropdown.js v3.3.7
     * http://getbootstrap.com/javascript/#dropdowns
     * ========================================================================
     * Copyright 2011-2016 Twitter, Inc.
     * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
     * ======================================================================== */
    
    
    +function ($) {
      'use strict';
    
      // DROPDOWN CLASS DEFINITION
      // =========================
    
      var backdrop = '.dropdown-backdrop'
      var toggle   = '[data-toggle="dropdown"]'
      var Dropdown = function (element) {
        $(element).on('click.bs.dropdown', this.toggle)
      }
    
      Dropdown.VERSION = '3.3.7'
    
      function getParent($this) {
        var selector = $this.attr('data-target')
    
        if (!selector) {
          selector = $this.attr('href')
          selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
        }
    
        var $parent = selector && $(selector)
    
        return $parent && $parent.length ? $parent : $this.parent()
      }
    
      function clearMenus(e) {
        if (e && e.which === 3) return
        $(backdrop).remove()
        $(toggle).each(function () {
          var $this         = $(this)
          var $parent       = getParent($this)
          var relatedTarget = { relatedTarget: this }
    
          if (!$parent.hasClass('open')) return
    
          if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return
    
          $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))
    
          if (e.isDefaultPrevented()) return
    
          $this.attr('aria-expanded', 'false')
          $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
        })
      }
    
      Dropdown.prototype.toggle = function (e) {
        var $this = $(this)
    
        if ($this.is('.disabled, :disabled')) return
    
        var $parent  = getParent($this)
        var isActive = $parent.hasClass('open')
    
        clearMenus()
    
        if (!isActive) {
          if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
            // if mobile we use a backdrop because click events don't delegate
            $(document.createElement('div'))
              .addClass('dropdown-backdrop')
              .insertAfter($(this))
              .on('click', clearMenus)
          }
    
          var relatedTarget = { relatedTarget: this }
          $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))
    
          if (e.isDefaultPrevented()) return
    
          $this
            .trigger('focus')
            .attr('aria-expanded', 'true')
    
          $parent
            .toggleClass('open')
            .trigger($.Event('shown.bs.dropdown', relatedTarget))
        }
    
        return false
      }
    
      Dropdown.prototype.keydown = function (e) {
        if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return
    
        var $this = $(this)
    
        e.preventDefault()
        e.stopPropagation()
    
        if ($this.is('.disabled, :disabled')) return
    
        var $parent  = getParent($this)
        var isActive = $parent.hasClass('open')
    
        if (!isActive && e.which != 27 || isActive && e.which == 27) {
          if (e.which == 27) $parent.find(toggle).trigger('focus')
          return $this.trigger('click')
        }
    
        var desc = ' li:not(.disabled):visible a'
        var $items = $parent.find('.dropdown-menu' + desc)
    
        if (!$items.length) return
    
        var index = $items.index(e.target)
    
        if (e.which == 38 && index > 0)                 index--         // up
        if (e.which == 40 && index < $items.length - 1) index++         // down
        if (!~index)                                    index = 0
    
        $items.eq(index).trigger('focus')
      }
    
    
      // DROPDOWN PLUGIN DEFINITION
      // ==========================
    
      function Plugin(option) {
        return this.each(function () {
          var $this = $(this)
          var data  = $this.data('bs.dropdown')
    
          if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
          if (typeof option == 'string') data[option].call($this)
        })
      }
    
      var old = $.fn.dropdown
    
      $.fn.dropdown             = Plugin
      $.fn.dropdown.Constructor = Dropdown
    
    
      // DROPDOWN NO CONFLICT
      // ====================
    
      $.fn.dropdown.noConflict = function () {
        $.fn.dropdown = old
        return this
      }
    
    
      // APPLY TO STANDARD DROPDOWN ELEMENTS
      // ===================================
    
      $(document)
        .on('click.bs.dropdown.data-api', clearMenus)
        .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
        .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
        .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
        .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)
    
    }(jQuery);
    </script>
    <style type="text/css">
    .code-folding-btn {
      margin-bottom: 4px;
    }
    
    .row { display: flex; }
    .collapse { display: none; }
    .in { display:block }
    .pull-right > .dropdown-menu {
        right: 0;
        left: auto;
    }
    
    .dropdown-menu {
        position: absolute;
        top: 100%;
        left: 0;
        z-index: 1000;
        display: none;
        float: left;
        min-width: 160px;
        padding: 5px 0;
        margin: 2px 0 0;
        font-size: 14px;
        text-align: left;
        list-style: none;
        background-color: #e4f2f5;
        -webkit-background-clip: padding-box;
        background-clip: padding-box;
        border: 1px solid #ccc;
        border: 1px solid rgba(0,0,0,.15);
        border-radius: 4px;
        -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
        box-shadow: 0 6px 12px rgba(0,0,0,.175);
    }
    
    .open > .dropdown-menu {
        display: block;
        color: #3b5a7a;
        background-color: #e4f2f5;
        background-image: none;
        border-color: #e4f2f5;
    }
    
    .dropdown-menu > li > a {
      display: block;
      padding: 3px 20px;
      clear: both;
      font-weight: 400;
      line-height: 1.42857143;
      color: #2f5175;
      white-space: nowrap;
    }
    
    .dropdown-menu > li > a:hover,
    .dropdown-menu > li > a:focus {
      color: #f16e59;
      text-decoration: none;
      background-color: #dbedf1;
    }
    
    .dropdown-menu > .active > a,
    .dropdown-menu > .active > a:hover,
    .dropdown-menu > .active > a:focus {
      color: #ffffff;
      text-decoration: none;
      background-color: #e95420;
      outline: 0;
    }
    .dropdown-menu > .disabled > a,
    .dropdown-menu > .disabled > a:hover,
    .dropdown-menu > .disabled > a:focus {
      color: #aea79f;
    }
    
    .dropdown-menu > .disabled > a:hover,
    .dropdown-menu > .disabled > a:focus {
      text-decoration: none;
      cursor: not-allowed;
      background-color: transparent;
      background-image: none;
      filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
    }
    
    .btn {
      display: inline-block;
      margin-bottom: 1;
      font-weight: normal;
      text-align: center;
      white-space: nowrap;
      vertical-align: middle;
      -ms-touch-action: manipulation;
          touch-action: manipulation;
      cursor: pointer;
      background-image: none;
      border: 1px solid transparent;
      padding: 4px 8px;
      font-size: 14px;
      line-height: 1.42857143;
      border-radius: 4px;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    .btn:focus,
    .btn:active:focus,
    .btn.active:focus,
    .btn.focus,
    .btn:active.focus,
    .btn.active.focus {
      outline: 5px auto -webkit-focus-ring-color;
      outline-offset: -2px;
    }
    .btn:hover,
    .btn:focus,
    .btn.focus {
      color: #ffffff;
      text-decoration: none;
    }
    .btn:active,
    .btn.active {
      background-image: none;
      outline: 0;
      box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
    }
    .btn.disabled,
    .btn[disabled],
    fieldset[disabled] .btn {
      cursor: not-allowed;
      filter: alpha(opacity=65);
      opacity: 0.65;
      box-shadow: none;
    }
    a.btn.disabled,
    fieldset[disabled] a.btn {
      pointer-events: none;
    }
    .btn-default {
      color: #3b5a7a;
      background-color: #e4f2f5; #important
      border-color: #e4f2f5;
    }
    
    .btn-default:focus,
    .btn-default.focus {
      color: #3b5a7a;
      background-color: #e4f2f5;
      border-color: #e4f2f5;
    }
    
    .btn-default:hover {
      color: #f16e59;
      background-color: #dbedf1;
      border-color: #dbedf1;
    }
    .btn-default:active,
    .btn-default.active,
    .btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
      border-radius: 0;
    }
    .btn-group > .btn:first-child {
      margin-left: 0;
    }
    .btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
    .btn-group > .btn:last-child:not(:first-child),
    .btn-group > .dropdown-toggle:not(:first-child) {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }
    .btn-group > .btn-group {
      float: left;
    }
    .btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {
      border-radius: 0;
    }
    .btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,
    .btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
    .btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }
    .btn-group .dropdown-toggle:active,
    .btn-group.open .dropdown-toggle {
      outline: 0;
    }
    .btn-group > .btn + .dropdown-toggle {
      padding-right: 8px;
      padding-left: 8px;
    }
    .btn-group > .btn-lg + .dropdown-toggle {
      padding-right: 12px;
      padding-left: 12px;
    }
    .btn-group.open .dropdown-toggle {
      box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
    }
    .btn-group.open .dropdown-toggle.btn-link {
      box-shadow: none;
    }
    
    </style>
    <script>
    var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
    document.write(str);
    </script>
    <script>
    $(document).ready(function () {
      window.initializeCodeFolding("show" === "hide");
    });
    </script>
    


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="./"><img src="P21_logo.png"></a></li>
<li><a href="./">PRESS Methodology note</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="1" data-path="background.html"><a href="background.html"><i class="fa fa-check"></i><b>1</b> Background</a></li>
<li class="chapter" data-level="2" data-path="monitoring-funding-to-statistics-with-accuracy.html"><a href="monitoring-funding-to-statistics-with-accuracy.html"><i class="fa fa-check"></i><b>2</b> Monitoring funding to statistics with accuracy</a>
<ul>
<li class="chapter" data-level="2.1" data-path="monitoring-funding-to-statistics-with-accuracy.html"><a href="monitoring-funding-to-statistics-with-accuracy.html#oecds-creditor-reporting-system-crs"><i class="fa fa-check"></i><b>2.1</b> OECD’s Creditor Reporting System (CRS)</a></li>
<li class="chapter" data-level="2.2" data-path="monitoring-funding-to-statistics-with-accuracy.html"><a href="monitoring-funding-to-statistics-with-accuracy.html#P21-online-survey"><i class="fa fa-check"></i><b>2.2</b> PARIS21’s annual online survey</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="machine-learning.html"><a href="machine-learning.html"><i class="fa fa-check"></i><b>3</b> Identifying data and statistical projects using machine learning</a>
<ul>
<li class="chapter" data-level="3.1" data-path="machine-learning.html"><a href="machine-learning.html#reading-the-crs-data"><i class="fa fa-check"></i><b>3.1</b> Reading the CRS data</a></li>
<li class="chapter" data-level="3.2" data-path="machine-learning.html"><a href="machine-learning.html#preparing-the-data"><i class="fa fa-check"></i><b>3.2</b> Preparing the data</a></li>
<li class="chapter" data-level="3.3" data-path="machine-learning.html"><a href="machine-learning.html#a-title-pattern-matching"><i class="fa fa-check"></i><b>3.3</b> <strong>A</strong>: Title pattern matching</a></li>
<li class="chapter" data-level="3.4" data-path="machine-learning.html"><a href="machine-learning.html#b-text-mining-of-long-descriptions"><i class="fa fa-check"></i><b>3.4</b> <strong>B</strong>: Text mining of long descriptions</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><i class="fa fa-check"></i><b>4</b> Monitoring funding to statistics with reduced reporting lag</a>
<ul>
<li class="chapter" data-level="4.1" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#what-is-the-reporting-lag"><i class="fa fa-check"></i><b>4.1</b> What is the reporting lag?</a></li>
<li class="chapter" data-level="4.2" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#estimating-using-CRS"><i class="fa fa-check"></i><b>4.2</b> Estimating up‐to‐date support to statistics using CRS</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#nowcasting-using-commitments-to-predict-current-disbursements"><i class="fa fa-check"></i><b>4.2.1</b> Nowcasting: using commitments to predict current disbursements</a></li>
<li class="chapter" data-level="4.2.2" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#forecasting-anticipating-future-funding"><i class="fa fa-check"></i><b>4.2.2</b> Forecasting: anticipating future funding</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#expanding-the-press-database"><i class="fa fa-check"></i><b>4.3</b> Expanding the PRESS database</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#exploring-alternative-data-sources-for-aid-flows-on-statistics"><i class="fa fa-check"></i><b>4.3.1</b> Exploring alternative data sources for aid flows on statistics</a></li>
<li class="chapter" data-level="4.3.2" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#addressing-gaps-in-the-alternative-data-sources"><i class="fa fa-check"></i><b>4.3.2</b> Addressing gaps in the alternative data sources</a></li>
<li class="chapter" data-level="4.3.3" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#linking-the-alternative-sources-the-new-harmonised-database"><i class="fa fa-check"></i><b>4.3.3</b> Linking the alternative sources: the new harmonised database</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="monitoring-funding-to-statistics-with-reduced-reporting-lag.html"><a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html#bringing-them-together-nowcasting-and-forecasting-with-the-new-harmonised-database"><i class="fa fa-check"></i><b>4.4</b> Bringing them together – nowcasting and forecasting with the new harmonised database</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>5</b> Conclusion</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="Appendix-A.html"><a href="Appendix-A.html"><i class="fa fa-check"></i><b>A</b> Appendix - Keyword lists</a>
<ul>
<li class="chapter" data-level="" data-path="Appendix-A.html"><a href="Appendix-A.html#english"><i class="fa fa-check"></i>English</a></li>
<li class="chapter" data-level="" data-path="Appendix-A.html"><a href="Appendix-A.html#french"><i class="fa fa-check"></i>French</a></li>
<li class="chapter" data-level="" data-path="Appendix-A.html"><a href="Appendix-A.html#spanish"><i class="fa fa-check"></i>Spanish</a></li>
<li class="chapter" data-level="" data-path="Appendix-A.html"><a href="Appendix-A.html#german"><i class="fa fa-check"></i>German</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="appendix---performance-tests.html"><a href="appendix---performance-tests.html"><i class="fa fa-check"></i><b>B</b> Appendix - Performance tests</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https\://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Methodology for measuring and estimating funding to data and statistics</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="machine-learning" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">3</span> Identifying data and statistical projects using machine learning<a href="machine-learning.html#machine-learning" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>The developed method to identify data and statistical projects is based on a two-step procedure that analyzes project titles in the first step by detecting pertinent keyword (<strong>A</strong>) and evaluates project’s detailed descriptions using a machine learning approach (<strong>B</strong>).</p>
<div id="reading-the-crs-data" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Reading the CRS data<a href="machine-learning.html#reading-the-crs-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After downloading all .txt files for the years 2006 - 2020 from the official OECD <a href="https://stats.oecd.org/DownloadFiles.aspx?DatasetCode=CRS1">data base</a>, the fully merged data set is stored.</p>
</div>
<div id="preparing-the-data" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Preparing the data<a href="machine-learning.html#preparing-the-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here, the process of preparing the data is outlined (see Fig. <a href="machine-learning.html#fig:data-preparation-CRS">3.1</a> for a comprehensive overview).</p>
<ol style="list-style-type: decimal">
<li><p><strong>Reducing the full CRS data set</strong></p>
<p>A known characteristic of Canadian reporting in the CRS data base is that both project titles and long descriptions<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a> are reported in both official languages in the format “Englisch/French”. To avoid misclassification and misidentification due to the presence of both languages, the French part was dropped. Additionally, the full data set was reduced to 16 necessary variables to avoid heavy computational load of the full 96-variable data set.</p></li>
<li><p><strong>Adding text identifiers</strong></p>
<ol style="list-style-type: lower-roman">
<li><p><em>Text cleaning</em>: First of all, the titles and descriptions were lowercased and cleaned by removing all numbers and punctuation signs in an effort to prepare the text for the creation of unique text identifiers. This is done to avoid unnecessary inclusion of projects that differ only slightly (e.g. by a number or comma).</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="machine-learning.html#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tm)</span>
<span id="cb1-2"><a href="machine-learning.html#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="machine-learning.html#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define function to clean titles</span></span>
<span id="cb1-4"><a href="machine-learning.html#cb1-4" aria-hidden="true" tabindex="-1"></a>clean_titles <span class="ot">&lt;-</span> <span class="cf">function</span>(title){</span>
<span id="cb1-5"><a href="machine-learning.html#cb1-5" aria-hidden="true" tabindex="-1"></a>  title <span class="ot">&lt;-</span> title <span class="sc">%&gt;%</span> </span>
<span id="cb1-6"><a href="machine-learning.html#cb1-6" aria-hidden="true" tabindex="-1"></a>    removeNumbers <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="machine-learning.html#cb1-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removePunctuation</span>(<span class="at">preserve_intra_word_dashes =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="machine-learning.html#cb1-8" aria-hidden="true" tabindex="-1"></a>    tolower</span>
<span id="cb1-9"><a href="machine-learning.html#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(title)</span>
<span id="cb1-10"><a href="machine-learning.html#cb1-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb1-11"><a href="machine-learning.html#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="machine-learning.html#cb1-12" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs_raw <span class="sc">%&gt;%</span></span>
<span id="cb1-13"><a href="machine-learning.html#cb1-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">projecttitle =</span> <span class="fu">clean_titles</span>(projecttitle),</span>
<span id="cb1-14"><a href="machine-learning.html#cb1-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">shortdescription =</span> <span class="fu">clean_titles</span>(shortdescription),</span>
<span id="cb1-15"><a href="machine-learning.html#cb1-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">longdescription =</span> <span class="fu">clean_titles</span>(longdescription))</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Id creation</em>: Each project title and description is given a specific id in order to be able to analyze only distinct titles and descriptions later on. These were created using a well-known hashing algorithm called “xxHash” that is reasonably fast and exhibits very good collision properties (see <a href="https://github.com/Cyan4973/xxHash" class="uri">https://github.com/Cyan4973/xxHash</a>).</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="machine-learning.html#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(digest)</span>
<span id="cb2-2"><a href="machine-learning.html#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="machine-learning.html#cb2-3" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="machine-learning.html#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> <span class="co"># use rowwise operations since digest concatenates vector of strings</span></span>
<span id="cb2-5"><a href="machine-learning.html#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">text_id =</span> digest<span class="sc">::</span><span class="fu">digest</span>(longdescription, <span class="at">algo =</span> <span class="st">&quot;xxhash32&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># add text_id as hashed longdesription</span></span></code></pre></div>
<p><br /></p></li>
<li><p><em>descr2mine</em>: Due to lazy reporting, frequently the descriptions differ only marginally from the project titles. This would pose a problem to the previously outlined twofold procedure since descriptions that are identical to the project titles would be analyzed twice. Therefore, only distinct descriptions are used which are identified using the <a href="https://en.wikipedia.org/wiki/Damerau%E2%80%93Levenshtein_distance">Damerau-Levenshtein-Distance</a> that counts how many alterations it would take to align both texts. The threshold for the maximal distance was set to 10 since this includes spelling mistakes, as well as one-word deviations (e.g. Output: …).</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="machine-learning.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringdist)</span>
<span id="cb3-2"><a href="machine-learning.html#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="machine-learning.html#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Max string distance underneath which strings can be considered the same/differing just by a word</span></span>
<span id="cb3-4"><a href="machine-learning.html#cb3-4" aria-hidden="true" tabindex="-1"></a>max_string_dist <span class="ot">&lt;-</span> <span class="dv">10</span> </span>
<span id="cb3-5"><a href="machine-learning.html#cb3-5" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="machine-learning.html#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">descr2mine =</span> <span class="fu">ifelse</span>(<span class="fu">stringdist</span>(projecttitle, longdescription) <span class="sc">&lt;</span> max_string_dist <span class="sc">|</span> <span class="fu">str_count</span>(longdescription) <span class="sc">&lt;</span> <span class="dv">3</span>, </span>
<span id="cb3-7"><a href="machine-learning.html#cb3-7" aria-hidden="true" tabindex="-1"></a>                             <span class="cn">NA</span>, </span>
<span id="cb3-8"><a href="machine-learning.html#cb3-8" aria-hidden="true" tabindex="-1"></a>                             longdescription))</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Crating identifiers</em>: The CRS data set contains information about purpose of the funding flow in form of the purpose code, as well as other valuable information in other markers such as the gender marker (add link to resource) or the certain channel codes (41146 for UN Women). Table 1 lists all added identifiers.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="machine-learning.html#cb4-1" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="machine-learning.html#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">scb =</span> <span class="fu">ifelse</span>(purposecode <span class="sc">==</span> <span class="dv">16062</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="co"># Statistical capcity building identifier</span></span>
<span id="cb4-3"><a href="machine-learning.html#cb4-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">pop =</span> <span class="fu">ifelse</span>(purposecode <span class="sc">==</span> <span class="dv">13010</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="co"># population policy identifier</span></span>
<span id="cb4-4"><a href="machine-learning.html#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">gen_ppcode =</span> <span class="fu">ifelse</span>(purposecode <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">15170</span><span class="sc">:</span><span class="dv">15180</span>), <span class="dv">1</span>, <span class="dv">0</span>), <span class="co"># add gender purpose code identifier</span></span>
<span id="cb4-5"><a href="machine-learning.html#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">gen_marker =</span> <span class="fu">ifelse</span>(gender <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(gender), <span class="dv">1</span>, <span class="dv">0</span>), <span class="co"># add gender marker (0 - no gender, 1 - primary purpose, 2 - secondary)</span></span>
<span id="cb4-6"><a href="machine-learning.html#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">gen_donor =</span> <span class="fu">ifelse</span>(channelcode <span class="sc">==</span> <span class="dv">41146</span>, <span class="dv">1</span>, <span class="dv">0</span>), <span class="co"># all projects from UN Women</span></span>
<span id="cb4-7"><a href="machine-learning.html#cb4-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">gen_sdg =</span> <span class="fu">str_detect</span>(sdgfocus, <span class="st">&quot;^5|,5&quot;</span>)) <span class="co"># SDG 5: Gender equality</span></span></code></pre></div>
<p><br /></p></li>
</ol></li>
</ol>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:data-preparation-CRS"></span>
<img src="images/data_preparation_CRS.png" alt="Diagram of the data preparation process." width="788" />
<p class="caption">
Figure 3.1: Diagram of the data preparation process.
</p>
</div>
</div>
<div id="a-title-pattern-matching" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> <strong>A</strong>: Title pattern matching<a href="machine-learning.html#a-title-pattern-matching" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the following, the process of matching pertinent keywords in project titles is outlined (see Fig. <a href="machine-learning.html#fig:title-pattern-matching">3.2</a> for a comprehensive overview).</p>
<ol style="list-style-type: decimal">
<li><p><strong>Preparing the data</strong></p>
<p>In the first step, the language of both title and description is detected using <a href="https://github.com/CLD2Owners/cld2">Google’s Compact Language detector 2</a> (CLD2). It can detect 83 different languages and exceeds similar language detection engines by as much as 10x in speed. Analyzing the language distribution is crucial to a refined classification since text in every language has to be treated differently, using different keywords for the subsequent title pattern matching and fitting a different machine learning model later on. Therefore, the procedure was applied to projects in English, French, Spanish and German since these make up the majority of detected languages. This was implemented by selecting only projects with combinations of (title_language, long_language) in (en, fr, es, de, NA) x (en, fr, es, de, NA) while excluding the (NA, NA) combination. This combination was excluded since CLD2 in a vast majority of cases detects NA if the text is very short or nonsensical.</p>
<p>To give an overview how many projects are analyzed using this method, this approach encompasses 3.145.387 (90.6%) projects while 23.4020 (6.7%) were excluded for being (NA, NA) projects. That leaves 90241 (2.6%) projects that were excluded because they were either wrongly detected or belong to some minor reporting languages (e.g. Norwegian, Portuguese or Polish with a significant fraction within the 2.6% of excluded projects).</p>
<p>In the second step, duplicated project titles were dropped to analyze these titles only once during the title pattern matching procedure which again reduced computation time.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="machine-learning.html#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># All languages to include in classification - options: en, fr, es, de</span></span>
<span id="cb5-2"><a href="machine-learning.html#cb5-2" aria-hidden="true" tabindex="-1"></a>languages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;en&quot;</span>, <span class="st">&quot;fr&quot;</span>, <span class="st">&quot;es&quot;</span>, <span class="st">&quot;de&quot;</span>)</span>
<span id="cb5-3"><a href="machine-learning.html#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="machine-learning.html#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Add unique title id and detect language of title and long description</span></span>
<span id="cb5-5"><a href="machine-learning.html#cb5-5" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb5-6"><a href="machine-learning.html#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">projecttitle_lower =</span> <span class="fu">tolower</span>(projecttitle)) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="machine-learning.html#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rowwise</span>() <span class="sc">%&gt;%</span> <span class="co"># use rowwise operations since digest concatenates vector of strings</span></span>
<span id="cb5-8"><a href="machine-learning.html#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title_id =</span> digest<span class="sc">::</span><span class="fu">digest</span>(projecttitle_lower, <span class="at">algo =</span> <span class="st">&quot;xxhash32&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># create title id to drop duplicated titles later</span></span>
<span id="cb5-9"><a href="machine-learning.html#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb5-10"><a href="machine-learning.html#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">title_language =</span> cld2<span class="sc">::</span><span class="fu">detect_language</span>(projecttitle)) <span class="sc">%&gt;%</span></span>
<span id="cb5-11"><a href="machine-learning.html#cb5-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">long_language =</span> cld2<span class="sc">::</span><span class="fu">detect_language</span>(longdescription))</span>
<span id="cb5-12"><a href="machine-learning.html#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="machine-learning.html#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Use only projects in en, fr, es and de</span></span>
<span id="cb5-14"><a href="machine-learning.html#cb5-14" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb5-15"><a href="machine-learning.html#cb5-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(title_language <span class="sc">%in%</span> <span class="fu">c</span>(languages, <span class="cn">NA</span>) <span class="sc">&amp;</span> long_language <span class="sc">%in%</span> <span class="fu">c</span>(languages,<span class="cn">NA</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-16"><a href="machine-learning.html#cb5-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(title_language) <span class="sc">|</span> <span class="sc">!</span><span class="fu">is.na</span>(long_language)) <span class="co"># omit projects with both languages NA </span></span>
<span id="cb5-17"><a href="machine-learning.html#cb5-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-18"><a href="machine-learning.html#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Select necessary columns and drop projects with duplicated title ids </span></span>
<span id="cb5-19"><a href="machine-learning.html#cb5-19" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb5-20"><a href="machine-learning.html#cb5-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(title_id, projecttitle, projecttitle_lower, longdescription, title_language, long_language) <span class="sc">%&gt;%</span></span>
<span id="cb5-21"><a href="machine-learning.html#cb5-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">duplicated</span>(title_id))</span></code></pre></div>
<p><br /></p></li>
<li><p><strong>Title pattern matching</strong></p>
<ol style="list-style-type: lower-roman">
<li><p><em>Clean and lemmatize keyword lists</em>: For the treatment of the minority languages (French, Spanish and German), the English keyword list for statistics was translated by experts working in the field of official statistics. It contains many aspects of official development assistance in statistics and can be found in Appendix <a href="Appendix-A.html#Appendix-A">A</a>. The keywords therein are chosen in a way that it is almost certain that a project is at least partly related to statistics if its title contains one of the keywords. The same was done for the English list of acronyms which can differ in other foreign languages. Together with the list for mining projects, the keyword lists were cleaned and lemmatized to guarantee that they will be matched to cleaned and lemmatized words occurring in project titles.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="machine-learning.html#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list_keywords_stat, list_acronyms and demining_small_arms previously loaded</span></span>
<span id="cb6-2"><a href="machine-learning.html#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="machine-learning.html#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Define lemmatization function</span></span>
<span id="cb6-4"><a href="machine-learning.html#cb6-4" aria-hidden="true" tabindex="-1"></a>clean_and_lemmatize <span class="ot">&lt;-</span> <span class="cf">function</span> (string){</span>
<span id="cb6-5"><a href="machine-learning.html#cb6-5" aria-hidden="true" tabindex="-1"></a>  string <span class="ot">&lt;-</span> string <span class="sc">%&gt;%</span> </span>
<span id="cb6-6"><a href="machine-learning.html#cb6-6" aria-hidden="true" tabindex="-1"></a>    tolower <span class="sc">%&gt;%</span> </span>
<span id="cb6-7"><a href="machine-learning.html#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeWords</span>(<span class="st">&quot;&#39;s&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># remove possesive s so that plural nouns get lemmatized correctly, e.g. &quot;women&#39;s&quot;</span></span>
<span id="cb6-8"><a href="machine-learning.html#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeNumbers</span>() <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="machine-learning.html#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removePunctuation</span>(<span class="at">preserve_intra_word_dashes =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-10"><a href="machine-learning.html#cb6-10" aria-hidden="true" tabindex="-1"></a>    stripWhitespace <span class="sc">%&gt;%</span> </span>
<span id="cb6-11"><a href="machine-learning.html#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeWords</span>(<span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">&#39;english&#39;</span>))) <span class="sc">%&gt;%</span> </span>
<span id="cb6-12"><a href="machine-learning.html#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">removeWords</span>(<span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="at">source =</span> <span class="st">&quot;smart&quot;</span>)[<span class="sc">!</span><span class="fu">stopwords</span>(<span class="at">source =</span> <span class="st">&quot;smart&quot;</span>) <span class="sc">%in%</span> <span class="st">&quot;use&quot;</span>])) <span class="sc">%&gt;%</span> <span class="co"># exclude &quot;use&quot; from smart stopwords </span></span>
<span id="cb6-13"><a href="machine-learning.html#cb6-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">lemmatize_strings</span>()</span>
<span id="cb6-14"><a href="machine-learning.html#cb6-14" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-15"><a href="machine-learning.html#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="machine-learning.html#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Lemmatization for &quot;en&quot;</span></span>
<span id="cb6-17"><a href="machine-learning.html#cb6-17" aria-hidden="true" tabindex="-1"></a>list_keywords_stat <span class="ot">&lt;-</span> <span class="fu">clean_and_lemmatize</span>(list_keywords_stat)</span>
<span id="cb6-18"><a href="machine-learning.html#cb6-18" aria-hidden="true" tabindex="-1"></a>demining_small_arms <span class="ot">&lt;-</span> <span class="fu">clean_and_lemmatize</span>(demining_small_arms)</span>
<span id="cb6-19"><a href="machine-learning.html#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="machine-learning.html#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Stemming for minority languages &quot;fr&quot;, &quot;es&quot; and &quot;de&quot;</span></span>
<span id="cb6-21"><a href="machine-learning.html#cb6-21" aria-hidden="true" tabindex="-1"></a>list_keywords_stat <span class="ot">&lt;-</span> <span class="fu">stem_and_concatenate</span>(list_keywords_stat, <span class="at">language =</span> lang)</span>
<span id="cb6-22"><a href="machine-learning.html#cb6-22" aria-hidden="true" tabindex="-1"></a>demining_small_arms <span class="ot">&lt;-</span> <span class="fu">stem_and_concatenate</span>(demining_small_arms, <span class="at">language =</span> lang)</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Clean and lemmatize titles</em>: Cleaning of project titles was achieved by removing numbers, punctuation and so called “stopwords” (e.g. “and”, “the”, “for”) since they don’t contain information towards the classification. Subsequently, words were lemmatized meaning to reduce different forms of a word to its lemma (e.g. “women”, “woman’s”, “woman” -&gt; “woman”). This is very important to guarantee that all various versions are found during the title pattern search. For minority languages however, stemming is used instead of lemmatization since no good lemmatization implementation was available.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="machine-learning.html#cb7-1" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="machine-learning.html#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">projecttitle_clean =</span> <span class="fu">ifelse</span>(title_language <span class="sc">==</span> lang <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(title_language), </span>
<span id="cb7-3"><a href="machine-learning.html#cb7-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="fu">clean_and_lemmatize</span>(projecttitle_lower),</span>
<span id="cb7-4"><a href="machine-learning.html#cb7-4" aria-hidden="true" tabindex="-1"></a>                                     projecttitle_clean)) <span class="sc">%&gt;%</span>        </span></code></pre></div>
<p><br /></p></li>
<li><p><em>Keyword detection</em>: For every language, the project title was analyzed whether it contains one of the statistical keywords or acronyms. Note that statistical keywords were detected within cleaned and lemmatized titles whereas for acronyms, the original title was used since the lemmatization and stemming algorithms were found to change acronyms.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="machine-learning.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create regex for searching titles </span></span>
<span id="cb8-2"><a href="machine-learning.html#cb8-2" aria-hidden="true" tabindex="-1"></a>list_keywords_stat <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste</span>(list_keywords_stat, <span class="at">collapse =</span> <span class="st">&quot; | &quot;</span>),<span class="st">&quot; |^&quot;</span>, <span class="co"># words with whitespaces</span></span>
<span id="cb8-3"><a href="machine-learning.html#cb8-3" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">paste</span>(list_keywords_stat, <span class="at">collapse =</span> <span class="st">&quot; |^&quot;</span>),<span class="st">&quot; | &quot;</span>, <span class="co"># beginning of string</span></span>
<span id="cb8-4"><a href="machine-learning.html#cb8-4" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">paste</span>(list_keywords_stat, <span class="at">collapse =</span> <span class="st">&quot;$| &quot;</span>), <span class="st">&quot;$&quot;</span>) <span class="co"># end of string</span></span>
<span id="cb8-5"><a href="machine-learning.html#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="machine-learning.html#cb8-6" aria-hidden="true" tabindex="-1"></a>list_acronyms <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste</span>(list_acronyms, <span class="at">collapse =</span> <span class="st">&quot; | &quot;</span>),<span class="st">&quot; |^&quot;</span>, </span>
<span id="cb8-7"><a href="machine-learning.html#cb8-7" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">paste</span>(list_acronyms, <span class="at">collapse =</span> <span class="st">&quot; |^&quot;</span>),<span class="st">&quot; | &quot;</span>, <span class="co"># beginning of string</span></span>
<span id="cb8-8"><a href="machine-learning.html#cb8-8" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">paste</span>(list_acronyms, <span class="at">collapse =</span> <span class="st">&quot;$| &quot;</span>), <span class="st">&quot;$&quot;</span>) <span class="co"># end of string</span></span>
<span id="cb8-9"><a href="machine-learning.html#cb8-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-10"><a href="machine-learning.html#cb8-10" aria-hidden="true" tabindex="-1"></a>demining_small_arms <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">&quot; &quot;</span>, <span class="fu">paste</span>(demining_small_arms, <span class="at">collapse =</span> <span class="st">&quot; | &quot;</span>),<span class="st">&quot; |^&quot;</span>, </span>
<span id="cb8-11"><a href="machine-learning.html#cb8-11" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste</span>(demining_small_arms, <span class="at">collapse =</span> <span class="st">&quot; |^&quot;</span>),<span class="st">&quot; | &quot;</span>, <span class="co"># beginning of string</span></span>
<span id="cb8-12"><a href="machine-learning.html#cb8-12" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">paste</span>(demining_small_arms, <span class="at">collapse =</span> <span class="st">&quot;$| &quot;</span>), <span class="st">&quot;$&quot;</span>) <span class="co"># end of string</span></span>
<span id="cb8-13"><a href="machine-learning.html#cb8-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-14"><a href="machine-learning.html#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Detect stat, acronyms and mining </span></span>
<span id="cb8-15"><a href="machine-learning.html#cb8-15" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb8-16"><a href="machine-learning.html#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">match_stat =</span> <span class="fu">ifelse</span>(title_language <span class="sc">==</span> lang <span class="sc">|</span> <span class="fu">is.na</span>(title_language), </span>
<span id="cb8-17"><a href="machine-learning.html#cb8-17" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">str_detect</span>(projecttitle_clean, list_keywords_stat), </span>
<span id="cb8-18"><a href="machine-learning.html#cb8-18" aria-hidden="true" tabindex="-1"></a>                             match_stat),</span>
<span id="cb8-19"><a href="machine-learning.html#cb8-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">mining =</span> <span class="fu">ifelse</span>(title_language <span class="sc">==</span> lang <span class="sc">|</span> <span class="fu">is.na</span>(title_language),</span>
<span id="cb8-20"><a href="machine-learning.html#cb8-20" aria-hidden="true" tabindex="-1"></a>                         <span class="fu">str_detect</span>(projecttitle_clean, demining_small_arms),</span>
<span id="cb8-21"><a href="machine-learning.html#cb8-21" aria-hidden="true" tabindex="-1"></a>                         mining)) <span class="sc">%&gt;%</span></span>
<span id="cb8-22"><a href="machine-learning.html#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">match_stat =</span> <span class="fu">ifelse</span>(title_language <span class="sc">==</span> lang <span class="sc">|</span> <span class="fu">is.na</span>(title_language),</span>
<span id="cb8-23"><a href="machine-learning.html#cb8-23" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">str_detect</span>(projecttitle_lower, list_acronyms) <span class="sc">|</span> match_stat,</span>
<span id="cb8-24"><a href="machine-learning.html#cb8-24" aria-hidden="true" tabindex="-1"></a>                             match_stat))</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Merging classes for final filter</em>: The reason to detect also mining projects was to exclude those projects from the statistics filter since expressions like “small arms survey”, “survey of landmine situation” make frequent appearances in project titles but are not related to statistics. Hence, only projects for which a statistical keyword was detected but no mining keyword are marked as a statistical project in the pattern matching step.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="machine-learning.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude mining projects, since they contain survey -&gt; not statistical project</span></span>
<span id="cb9-2"><a href="machine-learning.html#cb9-2" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="machine-learning.html#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">text_detection_wo_mining =</span> match_stat <span class="sc">&amp;</span> <span class="sc">!</span>mining) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="machine-learning.html#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">text_detection_wo_mining_w_scb =</span> match_stat <span class="sc">|</span> scb)</span></code></pre></div>
<p><br /></p></li>
</ol></li>
</ol>
<p>Lastly, the statistics filter is added back to the reduced data set according to the title id. This ensures that all projects with the same title in the reduced data set are marked as statistical by the title pattern matching.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:title-pattern-matching"></span>
<img src="images/title_pattern_matching.png" alt="Schematic diagram of the title pattern matching." width="881" />
<p class="caption">
Figure 3.2: Schematic diagram of the title pattern matching.
</p>
</div>
</div>
<div id="b-text-mining-of-long-descriptions" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> <strong>B</strong>: Text mining of long descriptions<a href="machine-learning.html#b-text-mining-of-long-descriptions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Lastly, the process of applying a machine learning approach to classify the projects’ long descriptions will be explained in detail (see Fig. <a href="machine-learning.html#fig:text-mining">3.3</a> for a comprehensive overview).</p>
<ol style="list-style-type: decimal">
<li><p><strong>Preparing the data</strong></p>
<ol style="list-style-type: lower-roman">
<li><p><em>Language filtering</em>: For the preparation of the data, the reduced data set with the additional statistics filter from the pattern matching is filtered according to the description language to ensure that the text mining is applied only to text in one language. Note that there are projects with differing title and description language (frequently English title, minority language description) which is however no problem, since a project’s description can be assumed to be statistical even when its title is in another language.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="machine-learning.html#cb10-1" aria-hidden="true" tabindex="-1"></a>lang <span class="ot">&lt;-</span> <span class="st">&quot;en&quot;</span></span>
<span id="cb10-2"><a href="machine-learning.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="machine-learning.html#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter only projects with description language lang</span></span>
<span id="cb10-4"><a href="machine-learning.html#cb10-4" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs_reduced <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="machine-learning.html#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(long_language <span class="sc">==</span> lang)</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Manual filter correction</em>: For 200 English projects, the description of projects, which were detected as statistical projects by the title pattern matching, were verified manually by experts. It can be the case that a projects title refers to statistics (e.g. “census aid”) while its description contains no relevant information towards a classification (“Material and equipment for on the ground operations”). This additional step makes sure that the learning set contains less errors and hence increases the accuracy.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="machine-learning.html#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Read manually verified projects </span></span>
<span id="cb11-2"><a href="machine-learning.html#cb11-2" aria-hidden="true" tabindex="-1"></a>man_verified <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">&quot;./Data/Manually verified/stat_projects_verified.rds&quot;</span>)</span>
<span id="cb11-3"><a href="machine-learning.html#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="machine-learning.html#cb11-4" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb11-5"><a href="machine-learning.html#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(descr2mine)) <span class="sc">%&gt;%</span></span>
<span id="cb11-6"><a href="machine-learning.html#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(text_id, <span class="at">description =</span> descr2mine, longdescription, <span class="at">class_filter =</span> text_detection_wo_mining_w_scb) <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="machine-learning.html#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(man_verified <span class="sc">%&gt;%</span> <span class="fu">select</span>(longdescription, match_stat), <span class="at">by =</span> <span class="st">&quot;longdescription&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># add manually verified</span></span>
<span id="cb11-8"><a href="machine-learning.html#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">class_filter =</span> <span class="fu">ifelse</span>(<span class="sc">!</span><span class="fu">is.na</span>(match_stat), match_stat, class_filter)) <span class="sc">%&gt;%</span> <span class="co"># replace class filter with manually verified filter</span></span>
<span id="cb11-9"><a href="machine-learning.html#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>longdescription, <span class="sc">-</span>match_stat)</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Drop duplicated text ids</em>: As for the title ids, duplicated text ids are dropped to reduce the computational load during the text mining. In addition, some projects shared a discription but differed in their title. If one of the projects was detected as <code>TRUE</code> and one as <code>FLASE</code> in step <strong>A</strong>, both of them were discarded to reduce errors in the training set later on.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="machine-learning.html#cb12-1" aria-hidden="true" tabindex="-1"></a>df_crs <span class="ot">&lt;-</span> df_crs_reduced <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="machine-learning.html#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(descr2mine)) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="machine-learning.html#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="machine-learning.html#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(text_id) <span class="sc">%&gt;%</span> <span class="co"># remove all ambiguous projects (same description, one FALSE one TRUE)</span></span>
<span id="cb12-5"><a href="machine-learning.html#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">n</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-6"><a href="machine-learning.html#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-7"><a href="machine-learning.html#cb12-7" aria-hidden="true" tabindex="-1"></a>  as.data.frame</span></code></pre></div>
<p><br /></p></li>
</ol></li>
<li><p><strong>Text mining of long description</strong></p>
<ol style="list-style-type: lower-roman">
<li><p><em>Construct learning and prediction set</em>: For this machine learning approach, it is necessary to construct a balanced learning set which contains 50% negatively marked (NM) and 50% positively marked (PM) projects. The projects detected in Step <strong>A</strong> are used as the PM projects since it is reasonable to assume that if the title contains statistical keywords, also its description refers to statistics. The NM projects are chosen randomly because it can be assumed that only a small fraction of projects refer to statistics and therefore the probability to introduce error into the learning set is very small. The prediction data set contains simply the rest of the NM projects in the text mining data set.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="machine-learning.html#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define parameters </span></span>
<span id="cb13-2"><a href="machine-learning.html#cb13-2" aria-hidden="true" tabindex="-1"></a>frac_pred_set <span class="ot">&lt;-</span> <span class="dv">1</span>             <span class="co"># use only x% of full prediction set to speed up for testing</span></span>
<span id="cb13-3"><a href="machine-learning.html#cb13-3" aria-hidden="true" tabindex="-1"></a>full_learning_percent <span class="ot">&lt;-</span> <span class="dv">1</span>     <span class="co"># take only x% of full learning set size if too large for RAM</span></span>
<span id="cb13-4"><a href="machine-learning.html#cb13-4" aria-hidden="true" tabindex="-1"></a>neg_sample_fraction <span class="ot">&lt;-</span> <span class="dv">1</span>       <span class="co"># fraction of NM to PM in learning set</span></span>
<span id="cb13-5"><a href="machine-learning.html#cb13-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-6"><a href="machine-learning.html#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Get size of PM projects in learning set</span></span>
<span id="cb13-7"><a href="machine-learning.html#cb13-7" aria-hidden="true" tabindex="-1"></a>size_positive_train <span class="ot">&lt;-</span> neg_sample_fraction <span class="sc">*</span> full_learning_percent <span class="sc">*</span> df_crs <span class="sc">%&gt;%</span> <span class="fu">filter</span>(class_filter <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> nrow</span>
<span id="cb13-8"><a href="machine-learning.html#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="machine-learning.html#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct prediction set</span></span>
<span id="cb13-10"><a href="machine-learning.html#cb13-10" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb13-11"><a href="machine-learning.html#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class_filter <span class="sc">==</span> <span class="cn">FALSE</span> <span class="sc">|</span> <span class="fu">is.na</span>(class_filter)) <span class="sc">%&gt;%</span></span>
<span id="cb13-12"><a href="machine-learning.html#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> frac_pred_set <span class="sc">*</span> <span class="fu">n</span>())</span>
<span id="cb13-13"><a href="machine-learning.html#cb13-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-14"><a href="machine-learning.html#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Error: if size of pred smaller than size of PM projects, not possible to construct training set</span></span>
<span id="cb13-15"><a href="machine-learning.html#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(pred <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(class_filter)) <span class="sc">%&gt;%</span> nrow <span class="sc">&lt;</span> size_positive_train) <span class="fu">stop</span>(<span class="st">&quot;Pred not large enough to create learning set! Choose a larger frac_pred_set&quot;</span>)</span>
<span id="cb13-16"><a href="machine-learning.html#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="machine-learning.html#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct training set</span></span>
<span id="cb13-18"><a href="machine-learning.html#cb13-18" aria-hidden="true" tabindex="-1"></a>learning <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb13-19"><a href="machine-learning.html#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class_filter <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-20"><a href="machine-learning.html#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="fu">n</span>()<span class="sc">*</span>full_learning_percent) <span class="sc">%&gt;%</span></span>
<span id="cb13-21"><a href="machine-learning.html#cb13-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(pred <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(class_filter)) <span class="sc">%&gt;%</span> <span class="fu">sample_n</span>(<span class="at">size =</span> size_positive_train)) <span class="co"># add same amount of NM project from pred</span></span>
<span id="cb13-22"><a href="machine-learning.html#cb13-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-23"><a href="machine-learning.html#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Exclude NM projects in training set from pred</span></span>
<span id="cb13-24"><a href="machine-learning.html#cb13-24" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> pred <span class="sc">%&gt;%</span></span>
<span id="cb13-25"><a href="machine-learning.html#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>text_id <span class="sc">%in%</span> train<span class="sc">$</span>text_id)</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Clean and lemmatize descr2mine</em>: As previously discussed, only distinct long descriptions (distinct from title) are used to avoid analyzing the same text twice. These are then cleaned and lemmatized to reduce the text to the relevant information.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="machine-learning.html#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set languages for stemming and lemmatization</span></span>
<span id="cb14-2"><a href="machine-learning.html#cb14-2" aria-hidden="true" tabindex="-1"></a>stem_languages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;de&quot;</span>, <span class="st">&quot;fr&quot;</span>, <span class="st">&quot;es&quot;</span>)</span>
<span id="cb14-3"><a href="machine-learning.html#cb14-3" aria-hidden="true" tabindex="-1"></a>lemma_languages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;en&quot;</span>)</span>
<span id="cb14-4"><a href="machine-learning.html#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="machine-learning.html#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Change original description with cleaned description</span></span>
<span id="cb14-6"><a href="machine-learning.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (lang <span class="sc">%in%</span> lemma_languages) {</span>
<span id="cb14-7"><a href="machine-learning.html#cb14-7" aria-hidden="true" tabindex="-1"></a>  learning<span class="sc">$</span>text_cleaned <span class="ot">&lt;-</span> <span class="fu">clean_and_lemmatize</span>(learning<span class="sc">$</span>description)</span>
<span id="cb14-8"><a href="machine-learning.html#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Start lemmatize pred&quot;</span>)</span>
<span id="cb14-9"><a href="machine-learning.html#cb14-9" aria-hidden="true" tabindex="-1"></a>  pred<span class="sc">$</span>text_cleaned <span class="ot">&lt;-</span> <span class="fu">clean_and_lemmatize</span>(pred<span class="sc">$</span>description)</span>
<span id="cb14-10"><a href="machine-learning.html#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&quot;Finished lemmatization pred&quot;</span>)</span>
<span id="cb14-11"><a href="machine-learning.html#cb14-11" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (lang <span class="sc">%in%</span> stem_languages) {</span>
<span id="cb14-12"><a href="machine-learning.html#cb14-12" aria-hidden="true" tabindex="-1"></a>  learning<span class="sc">$</span>text_cleaned <span class="ot">&lt;-</span> <span class="fu">stem_and_concatenate</span>(learning<span class="sc">$</span>description, <span class="at">language =</span> lang)</span>
<span id="cb14-13"><a href="machine-learning.html#cb14-13" aria-hidden="true" tabindex="-1"></a>  pred<span class="sc">$</span>text_cleaned <span class="ot">&lt;-</span> <span class="fu">stem_and_concatenate</span>(pred<span class="sc">$</span>description, <span class="at">language =</span> lang)</span>
<span id="cb14-14"><a href="machine-learning.html#cb14-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Create DTM matrices</em>: After splitting the learning set into the training set and testing set in a ration of 80/20, the document term matrix (DTM) is created for the training set. It has all the words that are present in all descriptions of the training data set (terms) as columns and collects their weighted frequency for each project in the respective row. For creating the DTMs of the test data and prediction data, terms occurring in the training data DTM are used which means that the all DTMs share the same columns. This is important for the prediction step later on since the model is only trained on these terms and assigns a relative weight to each of them. Therefore, it can only predict on terms that has already “seen”.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="machine-learning.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Take 80% training data, 20% testing data</span></span>
<span id="cb15-2"><a href="machine-learning.html#cb15-2" aria-hidden="true" tabindex="-1"></a>dt <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">sample</span>(<span class="fu">nrow</span>(learning), <span class="fu">nrow</span>(learning)<span class="sc">*</span><span class="fl">0.8</span>))</span>
<span id="cb15-3"><a href="machine-learning.html#cb15-3" aria-hidden="true" tabindex="-1"></a>train_data <span class="ot">&lt;-</span> learning[dt,]</span>
<span id="cb15-4"><a href="machine-learning.html#cb15-4" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> learning[<span class="sc">-</span>dt,]</span>
<span id="cb15-5"><a href="machine-learning.html#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="machine-learning.html#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct DTMs </span></span>
<span id="cb15-7"><a href="machine-learning.html#cb15-7" aria-hidden="true" tabindex="-1"></a>train_data_dtm <span class="ot">&lt;-</span> train_data<span class="sc">$</span>text_cleaned <span class="sc">%&gt;%</span> <span class="fu">VectorSource</span>() <span class="sc">%&gt;%</span> <span class="fu">VCorpus</span>() <span class="sc">%&gt;%</span> <span class="fu">DocumentTermMatrix</span>(<span class="at">control =</span> <span class="fu">list</span>(<span class="at">weighting =</span> weightTf))</span>
<span id="cb15-8"><a href="machine-learning.html#cb15-8" aria-hidden="true" tabindex="-1"></a>dictionary_dtm <span class="ot">&lt;-</span> <span class="fu">Terms</span>(train_data_dtm) <span class="co"># use only terms appearing in training data to construct test and pred DTM</span></span>
<span id="cb15-9"><a href="machine-learning.html#cb15-9" aria-hidden="true" tabindex="-1"></a>test_data_dtm <span class="ot">&lt;-</span> test_data<span class="sc">$</span>text_cleaned <span class="sc">%&gt;%</span> <span class="fu">VectorSource</span>() <span class="sc">%&gt;%</span> <span class="fu">VCorpus</span>() <span class="sc">%&gt;%</span> <span class="fu">DocumentTermMatrix</span>(<span class="at">control =</span> <span class="fu">list</span>(<span class="at">weighting =</span> weightTf, <span class="at">dictionary =</span> dictionary_dtm))</span>
<span id="cb15-10"><a href="machine-learning.html#cb15-10" aria-hidden="true" tabindex="-1"></a>prediction_data_dtm <span class="ot">&lt;-</span> pred<span class="sc">$</span>text_cleaned <span class="sc">%&gt;%</span> <span class="fu">VectorSource</span>() <span class="sc">%&gt;%</span> <span class="fu">VCorpus</span>() <span class="sc">%&gt;%</span> <span class="fu">DocumentTermMatrix</span>(<span class="at">control =</span> <span class="fu">list</span>(<span class="at">weighting =</span> weightTf, <span class="at">dictionary =</span> dictionary_dtm))</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Training the XGBoost model</em>: The model is obtained from the regularizing gradient boosting framework <a href="https://xgboost.readthedocs.io/en/stable/index.html">XGBoost</a> by fitting the training data. Due to the broad literature on this machine learning approach, a detailed discussion shall be refrained from here. It can be said however that by passing along the training data DTM alongside the correct classification labels, the XGBoost model identifies the most important words appearing in the PM projects and assigns a high importance to them (see Fig. <a href="machine-learning.html#fig:importance-matrix">3.4</a> below).</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="machine-learning.html#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set the labels for class_filter</span></span>
<span id="cb16-2"><a href="machine-learning.html#cb16-2" aria-hidden="true" tabindex="-1"></a>label.train <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(train_data<span class="sc">$</span>class_filter)</span>
<span id="cb16-3"><a href="machine-learning.html#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="machine-learning.html#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Training parameters</span></span>
<span id="cb16-5"><a href="machine-learning.html#cb16-5" aria-hidden="true" tabindex="-1"></a>eta_par <span class="ot">&lt;-</span> <span class="fl">0.1</span></span>
<span id="cb16-6"><a href="machine-learning.html#cb16-6" aria-hidden="true" tabindex="-1"></a>nrounds_par <span class="ot">&lt;-</span> <span class="dv">5</span> <span class="sc">/</span> eta_par</span>
<span id="cb16-7"><a href="machine-learning.html#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="machine-learning.html#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb16-9"><a href="machine-learning.html#cb16-9" aria-hidden="true" tabindex="-1"></a>fit.xgb <span class="ot">&lt;-</span> <span class="fu">xgboost</span>(<span class="at">data =</span> <span class="fu">as.matrix</span>(train_data_dtm), <span class="at">label =</span> label.train, <span class="at">max.depth =</span> <span class="dv">17</span>, <span class="at">eta =</span> eta_par, <span class="at">nthread =</span> <span class="dv">2</span>, </span>
<span id="cb16-10"><a href="machine-learning.html#cb16-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">nrounds =</span> nrounds_par, <span class="at">objective =</span> <span class="st">&quot;binary:logistic&quot;</span>, <span class="at">verbose =</span> <span class="dv">1</span>)</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Testing and prediction</em>: The model is then assessed using the test data. Since the model returns a score p_stat in the range from 0 to 1 whether a project’s description refers to statistics, different thresholds are tested to see how the model performs (more in Appendix 2). Finally, all projects in the prediction set are predicted using the fitted model. If a project receives a score of <span class="math inline">\(p_{stat} ≥ 0.9\)</span>, it is marked as statistical by the text mining (justification of threshold).</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="machine-learning.html#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict test and pred data</span></span>
<span id="cb17-2"><a href="machine-learning.html#cb17-2" aria-hidden="true" tabindex="-1"></a>test.xgb <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit.xgb, <span class="fu">as.matrix</span>(test_data_dtm))</span>
<span id="cb17-3"><a href="machine-learning.html#cb17-3" aria-hidden="true" tabindex="-1"></a>pred.xgb <span class="ot">&lt;-</span> <span class="fu">predict</span>(fit.xgb, <span class="fu">as.matrix</span>(prediction_data_dtm))</span>
<span id="cb17-4"><a href="machine-learning.html#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="machine-learning.html#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Set all projects to 1 for a score higher than 0.9</span></span>
<span id="cb17-6"><a href="machine-learning.html#cb17-6" aria-hidden="true" tabindex="-1"></a>threshold <span class="ot">&lt;-</span> <span class="fl">0.90</span></span>
<span id="cb17-7"><a href="machine-learning.html#cb17-7" aria-hidden="true" tabindex="-1"></a>test_data <span class="ot">&lt;-</span> <span class="fu">mutate</span>(test_data, <span class="at">predictions =</span> <span class="fu">ifelse</span>(predictions_raw <span class="sc">&gt;</span> threshold, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb17-8"><a href="machine-learning.html#cb17-8" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> <span class="fu">mutate</span>(pred, <span class="at">predictions =</span> <span class="fu">ifelse</span>(predictions_raw <span class="sc">&gt;</span> threshold, <span class="dv">1</span>, <span class="dv">0</span>))</span>
<span id="cb17-9"><a href="machine-learning.html#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="machine-learning.html#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Show accuracy</span></span>
<span id="cb17-11"><a href="machine-learning.html#cb17-11" aria-hidden="true" tabindex="-1"></a>accurracy <span class="ot">&lt;-</span> <span class="fu">mean</span>(test_data<span class="sc">$</span>predictions <span class="sc">==</span> test_data<span class="sc">$</span>class_filter)</span>
<span id="cb17-12"><a href="machine-learning.html#cb17-12" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(accurracy)</span></code></pre></div>
<p><br /></p></li>
<li><p><em>Iteration of step i.-v. for learning set robustness</em>: In step 1, the 50% NM projects were chosen at random since the probability that statistical project is in this set is very small. However, it could still be the case that the statistical projects are included by chance. This can be almost avoided by repeating steps 1. – 5. with a training set that is constructed using only projects that are predicted not to be statistical with <span class="math inline">\(p_{stat} ≤ 0.3\)</span>. This threshold is chosen because it makes sure that the training set is only constructed from true NM projects while not being too restrictive and potentially introducing a bias into the training set (e.g. if all projects with <span class="math inline">\(p_{stat} ≤ 0.05\)</span> stem from the agriculture sector). On average, this iterative procedure increases the accuracy by 5% - 10% depending on the size of the prediction set.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="machine-learning.html#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter projects with low score </span></span>
<span id="cb18-2"><a href="machine-learning.html#cb18-2" aria-hidden="true" tabindex="-1"></a>pred_negative <span class="ot">&lt;-</span> pred <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="machine-learning.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(predictions_raw <span class="sc">&lt;=</span> <span class="fl">0.3</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="machine-learning.html#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> size_positive_train) <span class="sc">%&gt;%</span> </span>
<span id="cb18-5"><a href="machine-learning.html#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(text_id, description, class_filter) </span>
<span id="cb18-6"><a href="machine-learning.html#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="machine-learning.html#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct new learning set with low-score projects as NM</span></span>
<span id="cb18-8"><a href="machine-learning.html#cb18-8" aria-hidden="true" tabindex="-1"></a>learning <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb18-9"><a href="machine-learning.html#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class_filter <span class="sc">==</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-10"><a href="machine-learning.html#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="fu">n</span>()<span class="sc">*</span>full_learning_percent) <span class="sc">%&gt;%</span></span>
<span id="cb18-11"><a href="machine-learning.html#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rbind</span>(pred_negative) <span class="sc">%&gt;%</span></span>
<span id="cb18-12"><a href="machine-learning.html#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(class_filter))</span>
<span id="cb18-13"><a href="machine-learning.html#cb18-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-14"><a href="machine-learning.html#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Construct pred from all NM projects that are not in the training set</span></span>
<span id="cb18-15"><a href="machine-learning.html#cb18-15" aria-hidden="true" tabindex="-1"></a>pred <span class="ot">&lt;-</span> df_crs <span class="sc">%&gt;%</span></span>
<span id="cb18-16"><a href="machine-learning.html#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>((class_filter <span class="sc">==</span> <span class="cn">FALSE</span> <span class="sc">|</span> <span class="fu">is.na</span>(class_filter)) <span class="sc">&amp;</span> <span class="sc">!</span>(text_id <span class="sc">%in%</span> pred_negative<span class="sc">$</span>text_id)) <span class="sc">%&gt;%</span></span>
<span id="cb18-17"><a href="machine-learning.html#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> frac_pred_set <span class="sc">*</span> <span class="fu">n</span>()) <span class="co">#use only frac_pred_set% to speed up for testing</span></span>
<span id="cb18-18"><a href="machine-learning.html#cb18-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-19"><a href="machine-learning.html#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Repeat step i. - v.</span></span></code></pre></div>
<p><br /></p></li>
</ol></li>
</ol>
<p>Finally, the text mining filter is added back to the reduced data set according to the text id. This ensures that all projects with the same description in the reduced data set are marked as statistical by the text mining methodology.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:text-mining"></span>
<img src="images/text_mining.png" alt="Schematic diagram of the text mining." width="906" />
<p class="caption">
Figure 3.3: Schematic diagram of the text mining.
</p>
</div>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:importance-matrix"></span>
<img src="images/importance_matrix.png" alt="Relative importance assigned to terms appearing in long descriptions." width="426" />
<p class="caption">
Figure 3.4: Relative importance assigned to terms appearing in long descriptions.
</p>
</div>

</div>
</div>
<div class="footnotes">
<hr />
<ol start="6">
<li id="fn6"><p>Originally both short and long description present in CRS data; from now one referred to as description<a href="machine-learning.html#fnref6" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="monitoring-funding-to-statistics-with-accuracy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="monitoring-funding-to-statistics-with-reduced-reporting-lag.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/PARIS21-DATA/PRESS_methodology_note/blob/master/03-Identifying-data-and-statistical-projects-using-machine-learning.Rmd",
"text": null
},
"download": [["PRESS_methodology_note.pdf", "PDF"]],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"depth": 1,
"scroll_highlight": true
},
"info": false
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
